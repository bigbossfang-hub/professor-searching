# 강사 정보 검색 앱 사용 가이드

## 📋 개요
이 디렉토리에는 Google Sheets에 저장된 강사 정보를 검색할 수 있는 두 가지 Streamlit 웹 애플리케이션이 포함되어 있습니다.

1. **instructor_search_app.py** - 기본 검색: 강사 이름으로 검색
2. **instructor_search_advanced_app.py** - 고급 검색: 강사이름, 분야, 강의 과목으로 검색하고 리스트에서 선택

## 🚀 실행 방법

### 1. 패키지 설치
```bash
cd instructor_manager
pip install -r requirements.txt
```

### 2. Google Sheets 접근 권한 설정

⚠️ **중요**: 만약 Google Sheets 파일이 Excel 형식(.xlsx)으로 업로드된 경우, 먼저 Google Sheets 형식으로 변환해야 합니다.
- Google Drive에서 파일 열기
- "Google 스프레드시트로 열기" 클릭
- 파일 > Google 스프레드시트로 저장

이 앱이 Google Sheets 데이터에 접근하려면 다음 중 하나의 방법을 설정해야 합니다:

#### 방법 A: 서비스 계정 권한 부여 (권장)

1. Google Sheets 파일 열기:
   - https://docs.google.com/spreadsheets/d/1-EaykQMr06Qm9FWDOJX3CVbAZylGom1G/edit

2. "공유" 버튼 클릭

3. 서비스 계정 이메일 추가:
   - 이메일: `ai-coding@huhsame-project-1.iam.gserviceaccount.com`
   - 권한: "뷰어" 선택
   - "전송" 클릭

4. 이제 앱이 서비스 계정을 통해 데이터에 접근할 수 있습니다.

#### 방법 B: 공개 시트로 전환

1. Google Sheets 파일 열기

2. "공유" 버튼 클릭

3. "링크가 있는 모든 사용자" 설정

4. "랜덤한 링크가 있는 모든 사용자"를 "뷰어"로 변경

5. 이제 CSV URL 방식으로 데이터를 읽을 수 있습니다.

#### 방법 C: CSV 파일 업로드 (간단한 대안)

위의 방법이 복잡하거나 작동하지 않는 경우:

1. Google Sheets에서 "파일 > 다운로드 > 쉼표로 구분된 값(.csv)" 선택
2. 다운로드한 CSV 파일 저장
3. 앱 실행 후 상단의 "CSV 파일 업로드" 버튼으로 파일 업로드
4. 업로드된 파일에서 검색 가능

### 3. 앱 실행

**기본 검색 앱**:
```bash
streamlit run instructor_search_app.py
```

**고급 검색 앱** (권장):
```bash
streamlit run instructor_search_advanced_app.py
```

브라우저가 자동으로 열리며 `http://localhost:8501`로 접속됩니다.

## 🔍 사용 방법

### 기본 검색 앱 (instructor_search_app.py)

1. **강사 검색**: 상단의 입력창에 강사 이름을 입력하세요
   - 예: 김양민, 윤정구, 박종훈 등
   - 부분 일치 검색도 지원합니다

2. **결과 확인**: 검색 결과가 카드 형식으로 표시됩니다
   - 강사 이름
   - 소속
   - 직업
   - 강의 과목
   - 이메일 (있는 경우)
   - 대분야/소분야 (있는 경우)
   - 만족도 (있는 경우)

3. **전체 목록 확인**: 왼쪽 사이드바에서 전체 강사 목록을 확인할 수 있습니다

### 고급 검색 앱 (instructor_search_advanced_app.py)

1. **다양한 검색**: 검색어 입력 후 검색 범위 선택
   - 전체: 강사이름, 분야, 강의 과목 모두에서 검색
   - 강사이름: 이름만 검색
   - 분야: 대분야/소분야만 검색
   - 강의과목: 강의 과목만 검색

2. **검색 결과 리스트**: 매칭된 강사들이 리스트로 표시됩니다
   - 각 항목에는 강사이름, 소속, 직업이 표시됩니다
   - "상세 정보 보기" 버튼을 클릭하면 전체 정보를 볼 수 있습니다

3. **상세 정보**: 선택한 강사의 상세 정보가 카드 형식으로 표시됩니다
   - 강사 이름, 소속, 직업, 강의 과목, 이메일
   - 대분야/소분야, 만족도
   - 학습자 주요 의견, 담당자 의견 등

4. **통계 정보**: 사이드바에서 전체 강사 수와 검색 결과 수를 확인할 수 있습니다

## 🛠️ 문제 해결

### 데이터를 불러올 수 없습니다

**증상**: "강사 데이터를 불러올 수 없습니다" 에러 메시지

**해결 방법**:
1. Google Sheets 접근 권한이 올바르게 설정되었는지 확인
2. 서비스 계정 이메일이 공유 목록에 추가되었는지 확인
3. 네트워크 연결 확인
4. Google Sheets API가 활성화되었는지 확인

### 검색 결과가 나오지 않습니다

**증상**: 강사 이름을 입력했지만 결과가 없음

**해결 방법**:
1. 강사 이름이 정확한지 확인
2. 사이드바의 전체 목록에서 정확한 이름 확인
3. 부분 일치 검색이므로 이름의 일부만 입력해도 가능

### 서비스 계정 키 파일을 찾을 수 없습니다

**증상**: "구글 시트 연결 실패" 에러

**해결 방법**:
1. `huhsame-service-account-key.json` 파일이 루트 디렉토리에 있는지 확인
2. 파일 경로가 올바른지 확인
3. 서비스 계정 키 파일이 손상되지 않았는지 확인

## 📊 데이터 구조

Google Sheets의 컬럼 구조:
- 강사이름
- 소속
- 직업
- 강의 과목
- e-mail 주소
- 대분야
- 소분야
- 만족도
- 학습자 주요 의견

## 🔄 업데이트

Google Sheets의 데이터는 실시간으로 반영됩니다. 데이터를 캐싱하여 성능을 최적화하지만, 데이터가 업데이트되면 자동으로 다시 불러옵니다.

## 📝 참고사항

- 이 앱은 읽기 전용입니다. 데이터 수정은 Google Sheets에서 직접 해야 합니다.
- 보안을 위해 서비스 계정은 "뷰어" 권한만 부여하는 것을 권장합니다.
- 대량의 데이터를 불러올 때는 초기 로딩에 시간이 걸릴 수 있습니다.

